# 静的サイトジェネレーター Stadon
静的サイトジェネレーターとは、PHPなどをサーバーサイドで使用する利点のひとつである
「スクリプトによりHTMLやCSSなどを動的に作成することで、同じようなHTMLコードなどを何度も書く手間が減る。
その結果としてサイトのメンテナンスが効率的にできる」
という機能を、HTMLやCSSなどをアップロードする前の段階で利用するためのツールです。
これにより、サイトがHTMLやCSSなどだけで構成される単純ですっきりとしたものになります。  
すなわち、「静的」とは、エンドユーザーがサイトにアクセスした時点でリアルタイムにサーバーサイドで
HTMLやCSSなどのレスポンスを生成するようなことはしないという意味です。
クライアントサイドで動的にHTMLやCSSなどを作成することはもちろんできますので、
リッチなサイト構築に支障が出るようなことはありません。

## 対象ユーザー
* HTML や CSS をテキストエディターで直接編集したり、文章を Markdown で書いたりするほうが
なんだかんだいって効率がよいと考えている方。そしてそのためのお気に入りのテキストエディターがある方。
* 「スクリプトによりHTMLやCSSなどを動的に作成することで、同じようなHTMLコードなどを何度も書く手間が減る。
その結果としてサイトのメンテナンスが効率的にできる」
という理由のみからサーバーサイド型のサイトを構築しようとしていた方。
* サイトの作成を請け負った方で、サーバーサイド型のサイトにするほどのお金をもらえるわけではないが、
かといってあまり手間をかけてないようなしょぼいサイトではお金が取りにくいしなぁ、
と考えていたところだった方。
* そもそも使おうとしていたサーバーではサーバーサイド型のサイトを作ることができないという方。
* なお、スクリプト自体が公開されることはないため、サイトのデザインには自信があるが、
スクリプトを書くことについては苦手であるという方にもおすすめです。

## Stadon の特徴
とても単純な JavaScript であるため、使用者が自分好みにカスタマイズすることで
様々な状況に対応できます。

## 必要なもの
Node.js 上で JavaScript が実行できる環境。  
動作確認は Windows 7, Windows 10 で行っております。  
なお、Node.js は JavaScript を実行するためのアプリです
（パッケージ管理機能とかも有しているようですが何が便利なのか僕にはよくわかりません）。

## ダウンロード
https://github.com/uniho/stadon の 「Clone or download」というボタンをクリックして、
「Download Zip」というボタンをクリックすることでダウンロードできます。

## インストール
1. Node.js をインストールする。
Windows の場合 https://nodejs.org/ja/ から .msi ファイルをダウンロードしそれを実行します。
1. 作業用ディレクトリを作成し、その中にStadonの構成ファイルをコピーします。
次のような構成になります。

```
    作業用ディレクトリ/  
      ├ $stadon.js  
      ├ node_modules/  
      │  ├ mkdirp/  
      │  └ require-from-string/  
      └ source/  
          ├ copy/  
          └ script/  
```

## 使い方
$stadon.js を Node.js 上で実行します。
その方法は色々あると思いますが、
僕のおすすめは Microsoft 社製の Visual Studio Code というアプリを用いた方法です。
Visual Studio Code(以下VSC)を用いることでスクリプトの作成効率が格段に向上します。  
VSC は初期状態で JavaScript を Node.js を用いて実行するようになっていますので、
VSC で $stadon.js を開き、F5 を押すだけで Stadon を実行できます。  

完成した HTML や CSS ファイルなどは、作業用ディレクトリ内の web ディレクトリに出力されます
(web ディレクトリが存在しない場合は作成されます)。
あとは web ディレクトリの中身をFTPなどで web サーバーにアップロードするだけです。

実行内容の詳細は次の通りです。  
source/copy ディレクトリの中のファイルやディレクトリは web ディレクトリにそのままコピーされます。  
source/script ディレクトリの中にある、拡張子が .js で、ファイル名の先頭が $ 以外の
スクリプトファイルが実行されます。
スクリプトファイルからの戻り値を内容として、そのスクリプトファイルのファイル名から
.js という拡張子が除去されたファイル名で web ディレクトリに出力されます。
例えば、index.html.js というスクリプトファイルは index.html として出力されます。  
なお、ひとつのスクリプトファイルから複数のファイルを出力することもできます。
詳しくはサンプルの /tablet/02.txt.js を参照してください。  

ファイル名の先頭が $ のファイルはモジュールとして使用できます。
サンプルの index.html.js などでは $common.js をモジュールとして使用しています。

サンプルは、[Material Design Lite](https://getmdl.io/)でテンプレートとして配布されているものに、
Phones と Tablet というページを追加してみたものです。

node_modules ディレクトリに Node.js 用のモジュールを置くことで、
スクリプトファイルからそのモジュールを利用できるようになります。
$stadon.js では [mkdirp](https://github.com/substack/node-mkdirp) と
[require-from-string](https://github.com/floatdrop/require-from-string) というモジュールを利用しています。

## 免責条項
このアプリを利用したことで利用者にいかなる損害が生じたとしても、
このアプリの作者はその損害を賠償できません。  
この免責条項に同意できない方はこのアプリを利用しないでください。

## License
どなたも無料でこのアプリを使用できます。  
ソースコードのライセンスは New BSD です。  
このアプリは多くの自由に無料で利用できるアプリやコード等を利用しています。
これらの有益なアプリやコード等の公開に携わっているすべての方々に感謝します。
なお、本アプリを利用する場合は、それらのアプリやコード等のライセンスに
違反しないように注意してください。

## Contribution
1. Fork it
1. Create your feature branch
1. Commit your changes
1. Push to the branch
1. Create new Pull Request

-----
Copyright(c)2017- [UNI法務行政書士事務所](http://uni.s17.xrea.com/) All rights reserved.  

